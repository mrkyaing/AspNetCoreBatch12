@model SeatPlanViewModel
<h1 class="text-white">Your seat plan has @Model.NumberOfSeat</h1>
<div class="row">
    <div class="col-7">
        <div class="seatPlan py-3 text-center rounded-top">
            Please Select Your Seat(s)
        </div>
        <div class="p-5 bg-light rounded-bottom">
            <div class="row mb-2">
                <div class="col-12 text-center py-3 border border-1 border-primary bg-primary">Driver</div>
                <div class="col-6 border-bottom border-3 fs-5 fw-bold border-primary text-center">Left</div>
                <div class="col-6 border-bottom border-3 fs-5 fw-bold border-danger text-center">Right</div>
            </div>
            <div class="row seatContainer">
                @for (int a = 0; a < Model.NumberOfSeat; a++)
                {
                    int rowNumber = (a / 4) + 1;
                    string rowId = "Row" + rowNumber;
                    <div class="col-3 mr-2 seatHover AboutSeat border border-dark py-3 shadow text-center" id="@rowId"> @ViewBag.SeatNumbers[a]</div>
                }
            </div>
        </div>
    </div>
    <div class="col-5">
        <div class="seatPlan py-3 text-center rounded-top fw-bold">Trip Summary</div>
        <div class="p-5 bg-light rounded-bottom">
             <input type="hidden" id="txtRouteId" value="@Model.RouteId" />
            <div class="mb-3 row">
                <label class="col">Passenger Type :</label>
                <input type="text" disabled class="border border-light col text-start bg-transparent" value="@Model.PassengerType" readonly>
            </div>
            <div class="mb-3 row">
                <label class="col">Bus Line Type:</label>
                <input type="text" disabled class="border border-light col text-start bg-transparent" value="@Model.BusLineType" readonly>
            </div>
            <div class="mb-3 row">
                <label class="col">When (ကားထွတ်ချိန်):</label>
                <input type="text" disabled class="border border-light col text-start bg-transparent" value="@Model.When" readonly>
            </div>
            <div class="mb-3 row">
                <label class="col">Depatured Date (ခရီးစဉ် ရက်စွဲ)):</label>
                <input type="text" disabled class="border border-light col text-start bg-transparent" value="@Model.DepaturedDate" readonly>
            </div>
            <div class="mb-3 row">
                <label class="col">Unit Price (လက်မှတ်ခ):</label>
                <input type="text" disabled class="border border-light col text-start bg-transparent" value="@Model.UnitPrice" readonly>
            </div>
            <div class="mb-3 row">
                <label class="col">Seat Row</label>
                <input type="text" disabled class="border border-light col text-start bg-light p-1 text-primary overflow-auto" id="seatRow">
            </div>
            <div class="mb-3 row">
                <label class="col">Seat Place</label>
                <input type="text" readonly class="border border-light col text-start bg-transparent" value="email@example.com">
            </div>
            <div class="mb-3 row">
                <label class="col">Status</label>
                <input type="text" readonly class="border border-light col text-start bg-transparent" value="Pending">
            </div>
            <input class=" form-control selectSeat text-center text-primary fs-5 fw-bold" disabled />
            <button class="btn btn-danger checking mt-5 col-12">Check</button>
        </div>
    </div>
</div>
<script>
    let allSelectSeats = [];
    let allSelectRoles = [];

    $(".seatContainer").on('click', function (event) {

        let clickSeat = $(event.target);


        clickSeat.toggleClass("selectedSeat AboutSeat");
        let currentValue = $(".selectSeat").val();
        let currentRowValue = $("#seatRow").val();

        let modifiedValue;
        let seatRow;

        let removeValue = clickSeat.html()
        let removeRole = clickSeat.html() + " " + clickSeat.attr("id");
        if (!clickSeat.hasClass("AboutSeat")) {
            allSelectSeats.push(clickSeat.html());
            allSelectRoles.push(clickSeat.attr("id"));
            if (currentValue == "") {
                modifiedValue = clickSeat.html();
                seatRow = clickSeat.html() + " " + clickSeat.attr("id");

            } else {
                if (currentValue.charAt(currentValue.length - 1) == ",") {
                    modifiedValue = currentValue + clickSeat.html();
                    seatRow = currentRowValue + clickSeat.html() + " " + clickSeat.attr("id");
                } else {
                    modifiedValue = currentValue + "," + clickSeat.html();
                    seatRow = currentRowValue + "," + clickSeat.html() + " " + clickSeat.attr("id")
                }
            }
        } else {
            modifiedValue = currentValue.replace(new RegExp(removeValue + ",?"), '');
            seatRow = currentRowValue.replace(new RegExp(removeRole + ",?"), '');
            let index = $.inArray(clickSeat.html(), allSelectSeats);
            let rowIndex = $.inArray(clickSeat.attr("id"), allSelectRoles);
            if (index !== -1) {
                allSelectSeats.splice(index, 1);
                allSelectRoles.splice(rowIndex, 1);
            }
        }

        $(".selectSeat").val(modifiedValue);
        $("#seatRow").val(seatRow)
    })
    $(".checking").on('click', function () {

        console.log(allSelectSeats);

    })
</script>